""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
""""""""""""""""""""""""""""""""""" MAPPINGS """""""""""""""""""""""""""""""""""
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""


" Tweak existing keys for more natural operation
noremap j gj
noremap k gk
nnoremap Y y$
vnoremap < <gv
vnoremap > >gv
vnoremap . :normal .<CR>

" Delete and put with black hole register
xnoremap <Leader>p "_dP
nnoremap <Leader>d "_d
vnoremap <Leader>d "_d

" Plugin mappings
nnoremap <silent> <Leader>gs :Gstatus<CR>
nnoremap <Leader>gy :Goyo<CR>
nnoremap <Leader>gu :GundoToggle<CR>
nnoremap <S-Left> :SidewaysLeft<cr>
nnoremap <S-Right> :SidewaysRight<cr>
vmap <Enter> <Plug>(EasyAlign)

" Move blocks up and down
vmap <C-Up> xkP`[V`]
vmap <C-Down> xp`[V`]
nnoremap <C-Up> ddkP
nnoremap <C-Down> ddp

" Highlight recent visual selections
nnoremap <Leader>V `[v`]

" Fold selection
nnoremap <Leader><space> za
vnoremap <Leader><Space> zf

" Choose a color scheme with fzf
nnoremap <silent> <Leader>C :call fzf#run({
\   'source':
\     map(split(globpath(&rtp, "colors/*.vim"), "\n"),
\         "substitute(fnamemodify(v:val, ':t'), '\\..\\{-}$', '', '')"),
\   'sink':     'colo',
\   'options':  '+m',
\   'left':     20,
\   'launcher': 'xterm -geometry 20x30 -e bash -ic %s'
\ })<CR>

" Use <Leader><Enter> to list buffer with fuzzy searching
nnoremap <silent> <Leader><Enter> :call fzf#run({
\   'source':  reverse(Buflist()),
\   'sink':    function('Bufopen'),
\   'options': '+m',
\   'down':    len(Buflist()) + 2
\ })<CR>

" File actions
nnoremap <Leader>ff :FZF<CR>
nnoremap <Leader>fw :w<CR>
nnoremap <Leader>fo :e %%
nnoremap <Leader>ft :tabe %%
nnoremap <leader>fq :q<cr>

" command mode helpers
cmap w!! w !sudo tee % >/dev/null
cmap cd. lcd %:p:h
cnoremap %% <C-R>=expand('%:h').'/'<cr>

" clear search results
nmap <silent> <Leader>/ :nohlsearch<CR>

" vim: set ft=vim sw=4 ts=4 sts=4 et tw=78 nospell:
